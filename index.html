<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

body {
    margin:0;
    font-family:"Poppins", sans-serif;
    background: linear-gradient(135deg, #ffd6e8, #d6e4ff);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    transition: background 1s ease;
    overflow:hidden;
}

/* Floating hearts */
.heart {
    position: fixed;
    bottom: -10px;
    color: #ff4d6d;
    font-size: 18px;
    opacity: 0.7;
    animation: floatUp 6s linear infinite;
}
@keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 0.8; }
    100% { transform: translateY(-120vh) scale(1.8); opacity:0; }
}

.container {
    text-align:center;
    padding:30px;
    background: rgba(255,255,255,0.25);
    backdrop-filter: blur(10px);
    border-radius:20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    width:85%;
    max-width:450px;
    transition: all 0.5s ease;
}

/* Buttons */
button {
    margin:12px;
    padding:14px 30px;
    border:none;
    border-radius:50px;
    background:#fff;
    box-shadow:0 5px 12px rgba(0,0,0,0.12);
    transition:0.3s;
    font-size:16px;
    cursor:pointer;
}
button:hover { transform: scale(1.05); }
#yesBtn { animation: heartbeat 1.2s infinite; }
@keyframes heartbeat {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.08); }
}
#yesBtn.hidden, #noBtn.hidden { display:none; }

/* final glow animation */
.final-msg {
    font-size:18px;
    margin-top:25px;
    opacity:0;
    font-weight:600;
    text-shadow: 0 0 6px #ff4d6d, 0 0 12px #ffb3c6;
    line-height:1.5;
    white-space: pre-line;
}
.final-msg span {
    display:block;
    opacity:0;
    transform: translateY(10px);
    animation: fadeUp 1s forwards;
}
@keyframes fadeUp {
    to { opacity:1; transform: translateY(0); }
}

/* fade overlay */
#fadeOverlay {
    position: fixed;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background:white;
    opacity:0;
    pointer-events:none;
    transition: opacity 1.5s ease;
}

/* music icon */
#musicIcon {
    position:fixed;
    top:20px;
    right:20px;
    font-size:28px;
    cursor:pointer;
    color:#ff4d6d;
    z-index:999;
}
</style>
</head>
<body>

<!-- Floating hearts -->
<script>
for(let i=0;i<20;i++){
    let h=document.createElement("div");
    h.classList.add("heart");
    h.style.left=Math.random()*100+"vw";
    h.style.animationDelay=(Math.random()*5)+"s";
    h.innerHTML="‚ù§Ô∏è";
    document.body.appendChild(h);
}
</script>

<!-- Music icon -->
<div id="musicIcon">üéµ</div>
<audio id="bgMusic" src="https://cdn.pixabay.com/download/audio/2023/02/28/audio_09b7ba7698.mp3?filename=romantic-piano-14289.mp3" loop></audio>

<!-- fade overlay -->
<div id="fadeOverlay"></div>

<!-- 404 screen -->
<div class="container" id="screen404">
    <h2>404 ‚Äî Page Not Found</h2>
    <p>Looks like you're lost‚Ä¶</p>
    <button onclick="showValentine()">Refresh</button>
</div>

<!-- Valentine screen -->
<div class="container hidden" id="valentineScreen">
    <h2 id="emoji">üíå</h2>
    <h2>Will you be my Valentine?</h2>
    <button id="yesBtn" onclick="sayYes()">YES</button>
    <button id="noBtn" onclick="sayNo()">NO</button>

    <div class="final-msg" id="finalMessage">
        <span>Yes‚Ä¶ finally accepted ü§ç</span>
        <span>Take care of yourself.</span>
        <span>Learn the best, you are the best!</span>
        <span>Be happy. ‚ú®</span>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

<script>
// 404 ‚Üí Valentine
function showValentine(){
    document.getElementById("screen404").classList.add("hidden");
    document.getElementById("valentineScreen").classList.remove("hidden");
}

// YES logic
function sayYes(){
    setTimeout(()=>{
        document.getElementById("yesBtn").classList.add("hidden");
        document.getElementById("noBtn").classList.add("hidden");
    },100);

    confettiEffect();

    setTimeout(()=>{
        document.getElementById("fadeOverlay").style.opacity="0.2";
    },200);

    setTimeout(()=>{
        // Animate each line of final message
        const spans = document.querySelectorAll("#finalMessage span");
        spans.forEach((s,i)=>{ s.style.animationDelay = (i*0.6) + "s"; });
        document.getElementById("finalMessage").style.opacity="1";
        document.getElementById("fadeOverlay").style.opacity="0";
    },800);
}

// NO logic - smooth elegant movement
let noClicks = 0;
function sayNo() {
    noClicks++;

    const btn = document.getElementById("noBtn");
    const container = document.getElementById("valentineScreen");

    const cRect = container.getBoundingClientRect();
    const bRect = btn.getBoundingClientRect();

    const maxX = cRect.width - bRect.width - 20;
    const maxY = cRect.height - bRect.height - 20;
    const randX = Math.random() * maxX;
    const randY = Math.random() * maxY;

    btn.style.transition = "transform 0.6s ease-in-out";
    btn.style.transform = `translate(${randX - bRect.left + cRect.left}px, ${randY - bRect.top + cRect.top}px) scale(1.1)`;

    setTimeout(() => {
        btn.style.transform = `translate(${randX - bRect.left + cRect.left}px, ${randY - bRect.top + cRect.top}px) scale(1)`;
    }, 400);

    document.body.style.transition = "background 0.6s ease";
    document.body.style.background = `linear-gradient(135deg,hsl(${Math.random()*360},70%,85%),hsl(${Math.random()*360},70%,85%))`;

    if (noClicks >= 2) {
        document.getElementById("emoji").textContent = "ü•∫";
    }
}

// Confetti
function confettiEffect(){
    const duration=5000;
    const end=Date.now()+duration;
    (function frame(){
        confetti({particleCount:5,angle:60,spread:55,origin:{x:0}});
        confetti({particleCount:5,angle:120,spread:55,origin:{x:1}});
        if(Date.now()<end) requestAnimationFrame(frame);
    })();
}

// Music play/pause
const music=document.getElementById("bgMusic");
const icon=document.getElementById("musicIcon");
icon.addEventListener("click",()=>{
    if(music.paused){ music.play(); icon.textContent="üîä"; }
    else{ music.pause(); icon.textContent="üéµ"; }
});
</script>

</body>
</html>
